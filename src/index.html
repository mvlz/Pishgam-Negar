<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/tailwindcss-jit-cdn"></script>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="../assets/Styles/persian-datepicker.min.css">
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/persian-date.min.js"></script>
    <script src="../js/persian-datepicker.min.js"></script>
    <title>Pishgam Negar</title>

</head>

<body>
    <!-- backdrop -->
    <div class="backdrop">
        <img src="../assets/Img/backdrop.png" alt="cosmetic">
    </div>
    <!-- /backdrop -->

    <!-- container -->
    <div class="wrapper mx-auto">
        <!-- logo -->
        <img src="../assets/Img/pn-logo.png" alt="Pishgam Negar" class="logo">

        <!-- title -->
        <h1 class="title font-black">سامانه گزارش گیری فروشگاه آنلاین پیشگام نگار</h1>

        <!-- form container -->
        <div class="main-box ">
            <form class="form flex flex-col items-center" method="post" action="">
                <!-- form descibtion -->
                <p class="form-des font-normal text-2xl mb-8">
                    امکان گزارش گیری در دو حالت گزارش فروش و تجمیعی وجود دارد. لطفا نوع
                    گزارش خود را انتخاب کنید.
                </p>
                <!-- report state container -->
                <section
                    class="report-button-container grid grid-cols-2 divide-x-2 divide-gray-300 text-2xl font-bold mb-12">
                    <div class="divide-box" id="group1">
                        <label for="myyCheck" class="active">گزارش تجمیعی
                            <input type="radio" name="report" id="myyCheck" onclick="myFunction()" value="Aggregate"
                                class="report-input " checked>
                        </label>
                    </div>
                    <div class="divide-box">
                        <label for="myCheck">گزارش فروش
                            <input type="radio" name="report" id="myCheck" onclick="myFunction()" value="sales"
                                class="report-input">
                        </label>
                    </div>
                </section>
                <!-- /report state container -->


                <!-- form descibtion -->
                <p class="text-2xl mt-10 mb-8">خروجی گزارش براساس چه بازه ای تعیین شود؟</p>

                <!-- report type container -->
                <section class="report-type-container flex justify-between w-full" id="group2">
                    <!-- date type -->
                    <div class="report-type date-type report-type-checked">
                        <!-- date type header -->
                        <div class="report-type-header">
                            <label for="date" class="text-2xl">
                                <input type="radio" name="type" id="date" checked onclick="checkedReportType()">
                                <span class=" radio-circle radio-checked"></span>زمان و تاریخ
                            </label>
                        </div>
                        <!-- date type body -->
                        <div class="report-type-body">
                            <fieldset class="date-radios mb-4">
                                <label for="today">
                                    <input type="radio" name="date" id="today" value="today">
                                    <span class="radio-circle">
                                    </span>
                                    امروز
                                </label>
                                <label for="yesterday">
                                    <input type="radio" name="date" id="yesterday" value="yesterday">
                                    <span class="radio-circle"></span>
                                    دیروز
                                </label>
                                <label for="lastSevenDay">
                                    <input type="radio" name="date" id="lastSevenDay" value="lastSevenDay">
                                    <span class="radio-circle"></span>
                                    7روز گذشته
                                </label>
                                <label for="lastMonth">
                                    <input type="radio" name="date" id="lastMonth" value="lastMonth">
                                    <span class="radio-circle"></span>
                                    30روز گذشته
                                </label>
                            </fieldset>
                            <div class="flex flex-col gap-y-8">
                                <div class="date-input-box">
                                    <input class="datepicker-demo range-from-example-alt flex-grow" id="rang-from"
                                        placeholder="از تاریخ">
                                    <label for="rang-from">
                                        <span class="icon-Calendar1"></span>
                                    </label>
                                    <div class="range-from-example"></div>
                                </div>
                                <div class="date-input-box">
                                    <input class="datepicker-demo range-to-example-alt flex-grow" id="rang-to"
                                        placeholder="تا تاریخ">
                                    <label for="rang-to">
                                        <span class="icon-Calendar1"></span>
                                    </label>
                                    <div class="range-to-example"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- order type -->
                    <div class="report-type order-type ">
                        <!-- order type header -->
                        <div class="report-type-header">
                            <label for="order" class="text-2xl">
                                <input type="radio" name="type" id="order" onclick="checkedReportType()">
                                <span class="radio-circle"></span>شماره سفارش
                            </label>
                        </div>
                        <!-- order type body -->
                        <div class="report-type-body disable">
                            <p class="title mb-4">شماره 5 رقمی سفارش مورد نظر خود را وارد کنید.</p>
                            <div class="report-number-container">
                                <p class="text">از شماره</p>
                                <div class="num-input-box">
                                    <div id="from-number" class="numinput-container">
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="first"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="second"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="third"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="fourth"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="fifth"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                    </div>
                                    <p class="naminput-error hidden">
                                        <span class="icon-Danger"></span>
                                        شماره سفارش باید 5 رقمی باشد.
                                    </p>
                                </div>
                            </div>
                            <div class="report-number-container">
                                <p class="text">تا شماره</p>
                                <div class="num-input-box">
                                    <div id="to-number" class="numinput-container">
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="first"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="second"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="third"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="fourth"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="number" id="fifth"
                                                maxlength="1" />
                                            <span class="input-line"></span>
                                        </div>
                                    </div>
                                    <p class="naminput-error">
                                        <span class="icon-Danger"></span>
                                        شماره سفارش باید 5 رقمی باشد.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- /report type container -->

                <hr class="divide-line my-16"><!-- divide line -->


                <!-- More informations in sales report form -->
                <section class="more-inf-sales" id="sales-more-inf">
                    <p class="title">تمایل دارید چه اطلاعات دیگری در گزارش شما وجود داشته باشد؟</p>
                    <!-- notice box -->
                    <div class="notice-box">
                        <span class="icon-Info-Square"></span>
                        انتخاب این موارد اختیاری است.
                    </div>

                    <!-- information boxes container -->
                    <div class="info-boxes-container w-full mt-14 flex flex-col gap-y-8">
                        <!-- information boxes row -->
                        <div class="info-boxes">
                            <!-- information box -->
                            <div class="info-box">
                                <label for="customer-name">
                                    <input type="checkbox" name="inf" id="customer-name">
                                    <span class="checkBox"></span>
                                    نام مشتری
                                </label>
                            </div>

                            <!-- information box -->
                            <div class="info-box">
                                <label for="order-status">
                                    <input type="checkbox" name="inf" id="order-status">
                                    <span class="checkBox"></span>
                                    وضعیت سفارش
                                </label>
                            </div>
                        </div>

                        <!-- information boxes row -->
                        <div class="info-boxes">
                            <!-- locked boxes container of future features -->
                            <div class="locked-box-container">
                                <!-- locked box -->
                                <div class="locked-box disable">
                                    <span class="icon-Lock"></span>
                                    <p>تعداد محصولات</p>
                                </div>
                                <p class="soon-notice">بزودی ...</p>
                            </div>

                            <!-- locked boxes container of future features -->
                            <div class="locked-box-container">
                                <!-- locked box -->
                                <div class="locked-box disable">
                                    <span class="icon-Lock"></span>
                                    <p>فقط مشتری اولی ها</p>
                                </div>
                                <p class="soon-notice">بزودی ...</p>
                            </div>

                            <!-- locked boxes container of future features -->
                            <div class="locked-box-container">
                                <!-- locked box -->
                                <div class="locked-box disable">
                                    <span class="icon-Lock"></span>
                                    <p>فیلتر براساس شهر</p>
                                </div>
                                <p class="soon-notice">بزودی ...</p>
                            </div>
                            <!-- /locked boxes container of future features -->
                        </div>
                    </div>
                    <!-- /information boxes container -->

                    <hr class="divide-line my-16"><!-- divide line -->
                </section>
                <!-- /More information -->


                <section class="paymentWay-container mb-32">
                    <p class="title">سفارشات با چه نوع روش پرداخت در گزارش شما وجود داشته باشد؟</p>
                    <!-- notice box -->
                    <div class="notice-box">
                        <span class="icon-Info-Square"></span>
                        حداقل یکی از موارد باید انتخاب شود.
                    </div>

                    <!-- information boxes container -->
                    <div class="info-boxes-container w-full mt-14 flex flex-col gap-y-8">
                        <!-- information boxes row -->
                        <div class="info-boxes">
                            <!-- information box -->
                            <div class="info-box">
                                <label for="online-orders-pasargad">
                                    <input type="checkbox" name="payment" id="online-orders-pasargad">
                                    <span class="checkBox"></span>
                                    سفارشات آنلاین (درگاه بانک پاسارگاد)
                                </label>
                            </div>

                            <!-- information box -->
                            <div class="info-box">
                                <label for="online-orders-melli">
                                    <input type="checkbox" name="payment" id="online-orders-melli">
                                    <span class="checkBox"></span>
                                    سفارشات آنلاین (درگاه بانک ملی)
                                </label>
                            </div>
                        </div>
                        <!-- information boxes row -->
                        <div class="info-boxes">
                            <!-- information box -->
                            <div class="info-box">
                                <label for="onSite-delivery-orders">
                                    <input type="checkbox" name="payment" id="onSite-delivery-orders">
                                    <span class="checkBox"></span>
                                    سفارشات تحویل در محل
                                </label>
                            </div>

                            <!-- information box -->
                            <div class="info-box">
                                <label for="direct-orders">
                                    <input type="checkbox" name="payment" id="direct-orders">
                                    <span class="checkBox"></span>
                                    سفارشات مستقیم
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- /information boxes container -->
                </section>
                <section class="submit-btns-container w-full flex justify-between mt-14 mb-1">
                    <div class="button-box">
                        <button type="submit">
                            <span class="icon-Show"></span>
                            نمایش گزارش
                        </button>
                    </div>
                    <div class="button-box">
                        <button type="submit">
                            <span class="icon-Paper-Fail"></span>
                            خروجی اکسل
                        </button>
                        <div class="output-progress">
                            <p class="">لطفا منتظر بمانید...</p>
                            <p class="">35%</p>
                        </div>
                    </div>
                    <div class="button-box">
                        <button type="submit" class="disable">
                            <span class="icon-Lock"></span>
                            خروجی مخصوص سپیدار
                        </button>
                        <p class="soon-notice">بزودی ...</p>
                    </div>
                </section>
            </form>
        </div>
        <!-- form container -->
    </div>
    <!-- /container -->

    <!-- Footer -->
    <footer class="footer">
        <img src="../assets/Img/pn-logo.png" alt="Pishgam Negar" class="logo">
    </footer>
    <!-- /Footer -->
    <script src="./index.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            // $(".example1").pDatepicker();
            var to, from;

            to = $(".range-to-example-alt").persianDatepicker({
                // inline: true,
                // altField: '.range-to-example-alt',
                altFormat: 'LLLL',
                initialValue: false,
                onSelect: function (unix) {
                    to.touched = true;
                    if (from && from.options && from.options.maxDate != unix) {
                        var cachedValue = from.getState().selected.unixDate;
                        from.options = { maxDate: unix };
                        if (from.touched) {
                            from.setDate(cachedValue);
                        }
                    }
                },
                timePicker: {
                    enabled: true,
                },
                navigator: {
                    scroll: {
                        enabled: false,
                    }
                }
            });
            from = $(".range-from-example-alt").persianDatepicker({
                // inline: true,
                // altField: '.range-from-example-alt',
                altFormat: 'LLLL',
                initialValue: false,
                onSelect: function (unix) {
                    from.touched = true;
                    if (to && to.options && to.options.minDate != unix) {
                        var cachedValue = to.getState().selected.unixDate;
                        to.options = { minDate: unix };
                        if (to.touched) {
                            to.setDate(cachedValue);
                        }
                    }
                },
                timePicker: {
                    enabled: true,
                },
                navigator: {
                    scroll: {
                        enabled: false,
                    }
                },
            });
            function range() {
                const tds = [...document.querySelectorAll(".datepicker-container td")];
                const selectedTd = [
                    ...document.querySelectorAll(".datepicker-container td.selected"),
                ];

                const getFrom = from.getState().selected;
                const getTo = to.getState().selected;
                const fromDate = getFrom.year + `${getFrom.month < 10 ? "0" + getFrom.month : getFrom.month}` + `${getFrom.date < 10 ? "0" + getFrom.date : getFrom.date}`
                const toDate = getTo.year + `${getTo.month < 10 ? "0" + getTo.month : getTo.month}` + `${getTo.date < 10 ? "0" + getTo.date : getTo.date}`

                const tdds = tds.filter((t) => ![...t.classList].includes("disabled"));
                const timeSpanTds = tdds.filter(
                    (t) => parseInt(fromDate) <= parseInt(splitDate(t.dataset.date)) && parseInt(splitDate(t.dataset.date)) <= parseInt(toDate)
                );
                // console.log(timeSpanTds);
                if (timeSpanTds[timeSpanTds.length - 1].dataset.date !== timeSpanTds[0].dataset.date) {

                    timeSpanTds[timeSpanTds.length - 1].classList.add("toSelected")
                    timeSpanTds[0].classList.add("fromSelected")
                    timeSpanTds[timeSpanTds.length / 2].classList.add("fromSelected")
                }

                timeSpanTds.forEach((tst) => {
                    tst.classList.add("time-span");
                });
            }
            function splitDate(date) {
                let varrey = date.split(",")
                const vv = `${varrey[0]}` + `${varrey[1] < 10 ? "0" + varrey[1] : varrey[1]}` + `${varrey[2] < 10 ? "0" + varrey[2] : varrey[2]}`
                return vv;
            }
            window.addEventListener("click", () => {
                // console.log(splitDate("1400,9,14"))

                range()
            })
        });

    </script>
</body>

</html>