<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pishgam Negar</title>
    <link rel="stylesheet" href="assets/styles/style.css">
    <link href="assets/styles/gridjs-mermaid.min.css" rel="stylesheet" />

</head>

<body class="show-page">

    <header class="header-container">
        <img src="assets/Img/pn-logo.png" alt="" class="logo">
        <a href="index.html" class="backBtn">
            بازگشت
            <span class="icon-Arrow---Left-2-1"></span>
        </a>

    </header>

    <div class="container">
        <!-- Report detail top of the grid js -->
        <section class="top-details">
            <h2 class="detail-title">گزارش فروش تجمیعی از ۱۴۰۰/۱۰/۰۱ تا ۱۴۰۰/۱۰/۲۰</h2>
        </section>

        <!-- Grid js  -->
        <div id="showReportModal"></div>
        <!-- /Grid js  -->

        <!-- Report detail bottom of the grid js -->
        <section class="bottom-details">
            <div class="detail-container">
                <h3 class="detail-title">مجموع پرداختی ها به تفکیک روش پرداخت</h3>
                <ul class="payment-list">
                    <li class="payment-item">درگاه پاسارگاد: 255 تومان</li>
                    <li class="payment-item">درگاه ملی: 999 تومان</li>
                    <li class="payment-item">پرداخت در محل: 888 تومان</li>
                    <li class="payment-item">پرداخت مستقیم: 8888 تومان</li>
                </ul>
            </div>
            <div class="detail-container">
                <h3 class="detail-title">خلاصه گزارش</h3>
                <ul class="summary-list">
                    <li class="summary-item">تعداد سفارشات: 9</li>
                    <li class="summary-item">تعداد اقلام: 999عدد</li>
                    <li class="summary-item">مجموع تخفیف ها: 777 تومان</li>
                    <li class="summary-item">مجموع هزینه ارسال: 1111 تومان</li>
                    <li class="summary-item">مجموع پرداختی ها: 5555 تومان</li>
                    <li class="summary-item">مجموع محصولات: 77777 تومان</li>
                </ul>
            </div>
        </section>
    </div>


    <div class="toast">
        <p class="notice"></p>
        <div class="toast-body">

        </div>
        <div class="close"></div>
    </div>
    <script src="js/gridjs.umd.js"></script>
    <script>
        // =-=-=-=-=-=-=  Grid JS  =-=-=-=-=-=-=//

        const grid = new gridjs.Grid({
            columns: [
                { id: 'id_order', name: 'شناسه سفارش' },
                { id: 'customer_name', name: 'نام مشتری' },
                { id: 'payment', name: 'روش پرداخت' },
                {
                    id: 'total_paid',
                    name: 'مبلغ پرداخت شده',
                    formatter: (cell) => cell > 0 ? ` ${cell.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} تومان` : "ندارد"
                },
                {
                    id: 'total_products',
                    name: 'جمع محصولات',
                    formatter: (cell) => cell > 0 ? ` ${cell.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} تومان` : "ندارد"
                },
                {
                    id: 'total_shipping',
                    name: 'هزینه حمل',
                    formatter: (cell) => cell > 0 ? ` ${cell.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} تومان` : "رایگان"
                },
                {
                    id: 'total_discounts_calc',
                    name: 'جمع تخفیفات',
                    formatter: (cell) => cell > 0 ? ` ${cell.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} تومان` : "ندارد"
                },
                { id: 'current_state_name', name: 'وضعیت سفارش' }, { id: 'order_date', name: 'تاریخ سفارش' },
                {
                    id: 'final_check', name: 'بررسی نهایی',
                    formatter: (cell) => {
                        return gridjs.html(`<span class='${(cell.split(' ').join('')).toLowerCase() === 'ok' ? 'finalTd-ok' : 'finalTd-notOk'}'>${cell}</span>`)
                        console.log(cell);
                    }
                }],
            data: [
                { "id_order": 91707, "customer_name": "م. شوشتری", "payment": "پاسارگاد", "total_paid": 447440, "total_products": 447440, "total_shipping": 0, "total_discounts_calc": 0, "current_state_name": "پرداخت تاييد شده", "order_date": "2022-01-10 11:42:54", "final_check": "OK" },
                { "id_order": 91706, "customer_name": "و. فروشگاه اینترنتی جامداد", "payment": "پاسارگاد", "total_paid": 47460, "total_products": 47460, "total_shipping": 35000, "total_discounts_calc": 35000, "current_state_name": "بسته بندی شده تهران", "order_date": "2022-01-10 10:13:13", "final_check": "OK" },
                { "id_order": 91705, "customer_name": "ر. قنبری", "payment": "پرداخت در هنگام تحویل (COD)", "total_paid": 274400, "total_products": 274400, "total_shipping": 0, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده تهران", "order_date": "2022-01-10 00:31:20", "final_check": "Not OK" },
                { "id_order": 91704, "customer_name": "آ. کاویانی", "payment": "پاسارگاد", "total_paid": 274400, "total_products": 274400, "total_shipping": 0, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده تهران", "order_date": "2022-01-10 00:16:37", "final_check": "OK" },
                { "id_order": 91703, "customer_name": "ن. ذوالفقاری", "payment": "پاسارگاد", "total_paid": 331755, "total_products": 331755, "total_shipping": 0, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده ", "order_date": "2022-01-09 23:21:46", "final_check": "OK" },
                { "id_order": 91702, "customer_name": "ث. فیضی", "payment": "پاسارگاد", "total_paid": 413610, "total_products": 397610, "total_shipping": 16000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده ", "order_date": "2022-01-09 23:02:44", "final_check": "OK" },
                { "id_order": 91701, "customer_name": "س. رسولی ", "payment": "پرداخت در هنگام تحویل (COD)", "total_paid": 361250, "total_products": 361250, "total_shipping": 0, "total_discounts_calc": 0, "current_state_name": "پرداخت در محل", "order_date": "2022-01-09 21:27:39", "final_check": "Not OK" },
                { "id_order": 91700, "customer_name": "ا. دبیری", "payment": "پاسارگاد", "total_paid": 65300, "total_products": 49300, "total_shipping": 16000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده تهران", "order_date": "2022-01-09 15:49:40", "final_check": "OK" },
                { "id_order": 91699, "customer_name": "م. معصومی", "payment": "پاسارگاد", "total_paid": 80500, "total_products": 64500, "total_shipping": 16000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده ", "order_date": "2022-01-09 14:04:26", "final_check": "OK" },
                { "id_order": 91698, "customer_name": "ه. فروشگاه اینترنتی می تایم", "payment": "پاسارگاد", "total_paid": 757400, "total_products": 722400, "total_shipping": 35000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده تهران", "order_date": "2022-01-09 12:03:58", "final_check": "OK" },
                { "id_order": 91697, "customer_name": "م. زینلی ", "payment": "پاسارگاد", "total_paid": 609725, "total_products": 593725, "total_shipping": 16000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده ", "order_date": "2022-01-09 11:31:25", "final_check": "OK" },
                { "id_order": 91696, "customer_name": "س. نجفی ", "payment": "پاسارگاد", "total_paid": 180485, "total_products": 164485, "total_shipping": 16000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده تهران", "order_date": "2022-01-09 10:37:18", "final_check": "OK" },
                { "id_order": 91695, "customer_name": "و. رفیعی", "payment": "سداد(بانک ملی)", "total_paid": 489100, "total_products": 473100, "total_shipping": 16000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده ", "order_date": "2022-01-09 02:18:53", "final_check": "Not OK" },
                { "id_order": 91694, "customer_name": "غ. حسن زاده", "payment": "پاسارگاد", "total_paid": 180000, "total_products": 164000, "total_shipping": 16000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده ", "order_date": "2022-01-08 21:18:39", "final_check": "OK" },
                { "id_order": 91693, "customer_name": "ا. جعفری", "payment": "پاسارگاد", "total_paid": 237000, "total_products": 221000, "total_shipping": 16000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده ", "order_date": "2022-01-08 20:49:13", "final_check": "OK" },
                { "id_order": 91692, "customer_name": "پ. همتی", "payment": "پرداخت در هنگام تحویل (COD)", "total_paid": 295800, "total_products": 295800, "total_shipping": 0, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده تهران", "order_date": "2022-01-08 19:29:54", "final_check": "Not OK" },
                { "id_order": 91691, "customer_name": "آ. آهنچی", "payment": "پرداخت در هنگام تحویل (COD)", "total_paid": 378655, "total_products": 378655, "total_shipping": 0, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده تهران", "order_date": "2022-01-08 19:09:29", "final_check": "Not OK" },
                { "id_order": 91690, "customer_name": "م. مرادی", "payment": "سداد(بانک ملی)", "total_paid": 121705, "total_products": 105705, "total_shipping": 16000, "total_discounts_calc": 0, "current_state_name": "بسته بندی شده ", "order_date": "2022-01-08 18:10:41", "final_check": "OK" },],
            sort: true,
            search: true,
            resizable: true,

            pagination: {
                enabled: true,
                limit: 15,
                summary: true,
            },
            language: {
                'search': {
                    'placeholder': 'جستجو...'
                },
                sort: {
                    sortAsc: 'مرتب سازی بصورت صعودی',
                    sortDesc: 'مرتب سازی بصورت نزولی',
                },
                'pagination': {
                    'previous': 'قبلی',
                    'next': 'بعدی',
                    navigate: (page, pages) => `صفحه ${page} از ${pages}`,
                    page: (page) => `صفحه ${page}`,
                    'showing': 'نمایش',
                    'of': 'از',
                    'to': 'تا',
                    'results': () => 'نتایج'
                },
                'loading': 'در حال بارگذاری...',
                'noRecordsFound': 'چیزی یافت نشد',
                'error': 'هنگام دریافت داده ها خطایی رخ داد',

            },
        }).render(document.getElementById('showReportModal'));

        // Show toast 
        let finalNotOk = [91705, 91701, 91695, 91692, 91691];
        const notice = document.querySelector('.notice');

        if (finalNotOk.length == 0) {
            notice.innerText = 'بررسی نهایی تمامی سفارشات OK است'
        } else {
            notice.innerText = `سفارشات زیر را بررسی کنید.  (${finalNotOk.length})`
            finalNotOk.forEach(id => {
                const item = document.createElement('p')
                item.innerHTML = `${id}`
                console.log(item);
                document.querySelector('.toast-body').appendChild(item)
            });
        }

        //Close toast
        const closeBtn = document.querySelector('.close')
        closeBtn.addEventListener('click', () => {
            closeBtn.parentElement.classList.add('slide-out')
            setTimeout(() => {
                closeBtn.parentElement.style.display = 'none';
            }, 750);
        })
    </script>
</body>

</html>