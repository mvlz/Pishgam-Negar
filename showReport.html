<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pishgam Negar</title>
    <link rel="stylesheet" href="assets/styles/style.css">
    <link href="assets/styles/gridjs-mermaid.min.css" rel="stylesheet" />

</head>

<body class="show-page">

    <header class="header-container">
        <a href="https://pishgamnegar.com">
            <img src="assets/Img/pn-logo.png" alt="" class="logo">
        </a>
        <a href="index.html" class="backBtn">
            بازگشت
            <span class="icon-Arrow---Left-2-1"></span>
        </a>

    </header>

    <div class="container">
        <!-- Report detail top of the grid js -->
        <section class="top-details">
            <h2 class="detail-title">گزارش فروش تجمیعی از ۱۴۰۰/۱۰/۰۱ تا ۱۴۰۰/۱۰/۲۰</h2>
        </section>

        <!-- Grid js  -->
        <div id="showReportModal"></div>
        <!-- /Grid js  -->

        <!-- Report detail bottom of the grid js -->
        <section class="bottom-details">
            <div class="detail-container">
                <h3 class="detail-title">مجموع پرداختی ها به تفکیک روش پرداخت</h3>
                <ul class="payment-list"></ul>
            </div>
            <div class="detail-container">
                <h3 class="detail-title">خلاصه گزارش</h3>
                <ul class="summary-list"></ul>
            </div>
        </section>
    </div>


    <div class="toast">
        <p class="notice"></p>
        <div class="toast-body">

        </div>
        <div class="close"></div>
    </div>
    <script src="js/gridjs.umd.js"></script>
    <script>
        // =-=-=-=-=-=-=  Grid JS  =-=-=-=-=-=-=//

        const grid = new gridjs.Grid({

            columns: [{ id: 'reference', name: 'مرجع' }, { id: 'product_name', name: 'نام محصول' }, { id: 'quantity', name: 'تعداد' },
            {
                id: 'unit_price',
                name: 'قیمت واحد',
                formatter: (cell) => cell > 0 ? ` ${cell.toLocaleString().replace(/\.0+$/, '').replace(/\B(?=(\d{3})+(?!\d))/g, ",")} تومان` : "ندارد",
                sort: {
                    compare: (a, b) => {
                        if (parseFloat(a) > parseFloat(b)) {
                            return 1;
                        } else if (parseFloat(a) < parseFloat(b)) {
                            return -1;
                        } else {
                            return 0;
                        }
                    }
                }
            },
            {
                id: 'total_price', name: 'قیمت کل',
                formatter: (cell) => cell > 0 ? ` ${cell.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} تومان` : "ندارد"
            },
            {
                id: 'tax_6_percent', name: 'مالیات (6 درصد)',
                formatter: (cell) => cell > 0 ? ` ${cell.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} تومان` : "ندارد"
            },
            {
                id: 'tax_3_percent', name: 'عوارض (3 درصد)',
                formatter: (cell) => cell > 0 ? ` ${cell.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} تومان` : "ندارد"
            },
            {
                id: 'net_price', name: 'قیمت خالص',
                formatter: (cell) => cell > 0 ? ` ${cell.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} تومان` : "ندارد"
            }],


            data: [{ "reference": "333539", "product_name": "نخ دندان ضد حساسیت میسویک | 50 متری", "quantity": 1, "unit_price": "30959.0", "total_price": 30959, "tax_6_percent": 1858, "tax_3_percent": 929, "net_price": 33745 }, { "reference": "255904", "product_name": "رژ لب مایع مات Perfection Matt بلک دایموند مای - رنگ رژ لب پرفکشن مت : 04", "quantity": 1, "unit_price": "71119.0", "total_price": 71119, "tax_6_percent": 4267, "tax_3_percent": 2134, "net_price": 77520 }, { "reference": "750027", "product_name": "شامپو ویتامینه و پروتئینه ژوت", "quantity": 1, "unit_price": "43532.0", "total_price": 43532, "tax_6_percent": 2612, "tax_3_percent": 1306, "net_price": 47450 }, { "reference": "990046", "product_name": "کرم صورت خاویار الی ژن", "quantity": 1, "unit_price": "149083.0", "total_price": 149083, "tax_6_percent": 8945, "tax_3_percent": 4472, "net_price": 162500 }, { "reference": "860191", "product_name": "فوم شستشوی صورت لافارر مناسب پوست خشک و حساس", "quantity": 2, "unit_price": "123027.5", "total_price": 246055, "tax_6_percent": 14763, "tax_3_percent": 7382, "net_price": 268200 }, { "reference": "410016", "product_name": "فوم شستشو پوست نرمال تا خشک ژوت", "quantity": 2, "unit_price": "47706.5", "total_price": 95413, "tax_6_percent": 5725, "tax_3_percent": 2862, "net_price": 104000 }, { "reference": "860199", "product_name": "سرم نرم کننده و حالت دهنده مو دو فاز لافارر", "quantity": 1, "unit_price": "192523.0", "total_price": 192523, "tax_6_percent": 11551, "tax_3_percent": 5776, "net_price": 209850 }, { "reference": "600277", "product_name": "کرم مرطوب کننده دست و صورت گلاب دیپ سنس", "quantity": 2, "unit_price": "24220.0", "total_price": 48440, "tax_6_percent": 2906, "tax_3_percent": 1453, "net_price": 52800 }, { "reference": "860179", "product_name": "کرم مرطوب کننده و آبرسان لافارر مناسب پوست خشک", "quantity": 2, "unit_price": "67362.5", "total_price": 134725, "tax_6_percent": 8084, "tax_3_percent": 4042, "net_price": 146850 }, { "reference": "860372", "product_name": "کرم آبرسان دست و صورت مورینگا امو مناسب پوست خشک و حساس", "quantity": 1, "unit_price": "36550.0", "total_price": 36550, "tax_6_percent": 2193, "tax_3_percent": 1097, "net_price": 39840 }, { "reference": "860374", "product_name": "لوسیون بدن آبرسان و فوق مغذی مورینگا امو مناسب پوست خشک و حساس", "quantity": 1, "unit_price": "55706.0", "total_price": 55706, "tax_6_percent": 3342, "tax_3_percent": 1671, "net_price": 60720 }, { "reference": "860385", "product_name": "کرم دست آبرسان و فوق مغذی مورینگا امو مناسب پوست خشک و حساس", "quantity": 1, "unit_price": "47339.0", "total_price": 47339, "tax_6_percent": 2840, "tax_3_percent": 1420, "net_price": 51600 }, { "reference": "950182", "product_name": "کرم آبرسان قوی پمپی آدرا حاوی هیالورونیک اسید 300 میل", "quantity": 1, "unit_price": "64092.0", "total_price": 64092, "tax_6_percent": 3846, "tax_3_percent": 1923, "net_price": 69860 }, { "reference": "860364", "product_name": "ژل شستشو و آبرسان صورت مورینگا امو مناسب پوست خشک و حساس حجم 200 میلی لیتر", "quantity": 1, "unit_price": "40220.0", "total_price": 40220, "tax_6_percent": 2413, "tax_3_percent": 1207, "net_price": 43840 }, { "reference": "936526", "product_name": "ماسک نقابی آبرسان نیکوتین آمید زوسان", "quantity": 1, "unit_price": "9174.0", "total_price": 9174, "tax_6_percent": 550, "tax_3_percent": 275, "net_price": 10000 }, { "reference": "334262", "product_name": "کرم ترمیم کننده و ضد ترک پا دافی", "quantity": 2, "unit_price": "26903.5", "total_price": 53807, "tax_6_percent": 3228, "tax_3_percent": 1614, "net_price": 58650 }, { "reference": "700172", "product_name": "اسپری حالت دهنده مو Ultra strong بیول حجم 500 میلی لیتر", "quantity": 2, "unit_price": "49596.5", "total_price": 99193, "tax_6_percent": 5952, "tax_3_percent": 2976, "net_price": 108120 }, { "reference": "860247", "product_name": "ماسک ضد آکنه لافارر", "quantity": 1, "unit_price": "136789.0", "total_price": 136789, "tax_6_percent": 8207, "tax_3_percent": 4104, "net_price": 149100 }, { "reference": "402529", "product_name": "کرم دور چشم سینره مخصوص افراد بالای 40 سال", "quantity": 1, "unit_price": "124771.0", "total_price": 124771, "tax_6_percent": 7486, "tax_3_percent": 3743, "net_price": 136000 }, { "reference": "334215", "product_name": "شامپو بدن کرمی کامان مدل Happiness", "quantity": 1, "unit_price": "67087.0", "total_price": 67087, "tax_6_percent": 4025, "tax_3_percent": 2013, "net_price": 73125 }, { "reference": "250068", "product_name": "ماسک مو با آبکشی کاسه ای تاپ شاپ حاوی روغن آرگان 500 میل", "quantity": 1, "unit_price": "80849.0", "total_price": 80849, "tax_6_percent": 4851, "tax_3_percent": 2425, "net_price": 88125 }, { "reference": "253604", "product_name": "رول دئودورانت ضد تعریق زنانه Pink Princess شون", "quantity": 2, "unit_price": "26514.0", "total_price": 53028, "tax_6_percent": 3182, "tax_3_percent": 1591, "net_price": 57800 }, { "reference": "253551", "product_name": "مام رول ضد تعریق مردانه Power Lift مای", "quantity": 1, "unit_price": "25812.0", "total_price": 25812, "tax_6_percent": 1549, "tax_3_percent": 774, "net_price": 28135 }, { "reference": "300030", "product_name": "قرص کپسولی تقویت کننده و ضد ریزش مو هیرتامین", "quantity": 1, "unit_price": "694037.0", "total_price": 694037, "tax_6_percent": 41642, "tax_3_percent": 20821, "net_price": 756500 }, { "reference": "118680", "product_name": "محلول پا نعناع و آلو  فریمن (مخصوص پدیکور)", "quantity": 1, "unit_price": "68349.0", "total_price": 68349, "tax_6_percent": 4101, "tax_3_percent": 2050, "net_price": 74500 }, { "reference": "118790", "product_name": "کرم پا و آرنج نعناع و اسطوخودوس فریمن", "quantity": 1, "unit_price": "102523.0", "total_price": 102523, "tax_6_percent": 6151, "tax_3_percent": 3076, "net_price": 111750 }, { "reference": "210197", "product_name": "تونر پاک کننده پوست چرب فاربن حاوی عصاره چای سبز", "quantity": 1, "unit_price": "65972.0", "total_price": 65972, "tax_6_percent": 3958, "tax_3_percent": 1979, "net_price": 71910 }, { "reference": "701192", "product_name": "ماسک مو انار داخل حمام بیول تیوبی حجم 200 میلی لیتر", "quantity": 1, "unit_price": "18482.0", "total_price": 18482, "tax_6_percent": 1109, "tax_3_percent": 554, "net_price": 20145 }, { "reference": "770018", "product_name": "کرم زیتون جی مناسب پیشگیری از ترک‌های پوستی حجم 100 میلی لیتر", "quantity": 1, "unit_price": "18349.0", "total_price": 18349, "tax_6_percent": 1101, "tax_3_percent": 550, "net_price": 20000 },],
            sort: true,
            search: true,
            resizable: true,

            pagination: {
                enabled: true,
                limit: 15,
                summary: true,
            },
            language: {
                'search': {
                    'placeholder': 'جستجو...'
                },
                sort: {
                    sortAsc: 'مرتب سازی بصورت صعودی',
                    sortDesc: 'مرتب سازی بصورت نزولی',
                },
                'pagination': {
                    'previous': 'قبلی',
                    'next': 'بعدی',
                    navigate: (page, pages) => `صفحه ${page} از ${pages}`,
                    page: (page) => `صفحه ${page}`,
                    'showing': 'نمایش',
                    'of': 'از',
                    'to': 'تا',
                    'results': () => 'نتایج'
                },
                'loading': 'در حال بارگذاری...',
                'noRecordsFound': 'چیزی یافت نشد',
                'error': 'هنگام دریافت داده ها خطایی رخ داد',

            },
        }).render(document.getElementById('showReportModal'));

        // Show toast 
        let finalNotOk = [91705, 91701, 91695, 91692, 91691];
        const notice = document.querySelector('.notice');

        if (finalNotOk.length == 0) {
            notice.innerText = 'بررسی نهایی تمامی سفارشات OK است'
        } else {
            notice.innerText = `سفارشات زیر را بررسی کنید.  (${finalNotOk.length})`
            finalNotOk.forEach(id => {
                const item = document.createElement('p')
                item.innerHTML = `${id}`
                document.querySelector('.toast-body').appendChild(item)
            });
        }

        //Close toast
        const closeBtn = document.querySelector('.close')
        closeBtn.addEventListener('click', () => {
            closeBtn.parentElement.classList.add('slide-out')
            setTimeout(() => {
                closeBtn.parentElement.style.display = 'none';
            }, 750);
        })

        // footer details data
        const infoArray = [{ "id": "totalPasargad", "report": "sales", "list": "payment", "title": "جمع درگاه پاسارگاد", "value": "119,246,341 تومان", "isCost": "TRUE" }, { "id": "totalMelli", "report": "sales", "list": "payment", "title": "جمع درگاه ملی", "value": "40,431,724 تومان", "isCost": "TRUE" }, { "id": "totalCOD", "report": "sales", "list": "payment", "title": "جمع تحویل در محل", "value": "0 تومان", "isCost": "TRUE" }, { "id": "totalDirect", "report": "sales", "list": "payment", "title": "جمع پرداخت مستقیم", "value": "0 تومان", "isCost": "TRUE" }, { "id": "ordersCount", "report": "sales", "list": "summary", "title": "تعداد سفارش‌ها", "value": "496 عدد", "isCost": "FALSE" }, { "id": "productsCount", "report": "sales", "list": "summary", "title": "تعداد محصولات", "value": "به زودی...", "isCost": "FALSE" }, { "id": "totalPaid", "report": "sales", "list": "summary", "title": "مجموع پرداختی", "value": "159,678,065 تومان", "isCost": "TRUE" }, { "id": "totalProducts", "report": "sales", "list": "summary", "title": "مجموع قیمت محصولات", "value": "162,196,450 تومان", "isCost": "TRUE" }, { "id": "totalShipping", "report": "sales", "list": "summary", "title": "مجموع هزینه‌های حمل", "value": "5,821,000 تومان", "isCost": "TRUE" }, { "id": "totalDiscount", "report": "sales", "list": "summary", "title": "مجموع تخفیف‌ها", "value": "8,339,385 تومان", "isCost": "TRUE" }];
        ;
        // Append items to DOM lists
        function appendListItem(params) {
            if (params) {
                const item = document.createElement("li")
                item.innerText = `${params.title}: ${params.value} ${params.isCost === "true" ? "تومان" : "عدد"}`
                document.querySelector(`.${params.list}-list`).appendChild(item)
            }
        }
        const footerDetails = document.querySelector(".bottom-details") // footer details box

        // condition of showing footer lists
        infoArray !== "NULL" ? infoArray.forEach(obj => appendListItem(obj)) : footerDetails.style.display = "none";


    </script>
</body>

</html>