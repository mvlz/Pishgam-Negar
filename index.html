<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="assets/Styles/persian-datepicker.min.css">
    <link href="assets/Styles/gridjs-mermaid.min.css" rel="stylesheet" />
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/persian-date.min.js"></script>
    <script src="js/persian-datepicker.min.js"></script>
    <title>Pishgam Negar</title>

</head>

<body>
    <!-- backdrop -->
    <div class="backdrop">
        <img src="assets/Img/backdrop.png" alt="cosmetic">
    </div>
    <!-- /backdrop -->

    <!-- container -->
    <div class="wrapper mx-auto">
        <!-- logo -->
        <img src="assets/Img/pn-logo.png" alt="Pishgam Negar" class="logo">

        <!-- title -->
        <h1 class="title">سامانه گزارش گیری فروشگاه آنلاین پیشگام نگار</h1>

        <!-- form container -->
        <div class="main-box ">
            <form class="form" method="post" action="">
                <!-- form descibtion -->
                <p class="title">
                    امکان گزارش گیری در دو حالت گزارش فروش و تجمیعی وجود دارد. لطفا نوع
                    گزارش خود را انتخاب کنید.
                </p>
                <!-- report state container -->
                <section class="report-type-container">
                    <div class="divide-box">
                        <label for="aggregatedReport" class="active">گزارش تجمیعی
                            <input type="radio" name="reportType" id="aggregatedReport" onclick="reportStateCheck()"
                                value="aggregatedReport" class="report-input " checked>
                        </label>
                    </div>
                    <div class="divide-box">
                        <label for="salesReport">گزارش فروش
                            <input type="radio" name="reportType" id="salesReport" onclick="reportStateCheck()"
                                value="salesReport" class="report-input">
                        </label>
                    </div>
                </section>
                <!-- /report state container -->


                <!-- form descibtion -->
                <p class="title range-type-title">خروجی گزارش براساس چه بازه ای تعیین شود؟</p>

                <!-- report type container -->
                <section class="range-type-container">
                    <!-- date type -->
                    <div class="range-type date-type range-type-checked">
                        <!-- date type header -->
                        <div class="range-type-header">
                            <label for="orderDate" class="">
                                <input type="radio" name="rangeType" id="orderDate" checked value="orderDate">
                                <span class=" radio-circle radio-checked"></span>زمان و تاریخ
                            </label>
                        </div>
                        <!-- date type body -->
                        <div class="range-type-body">
                            <div class="date-radios">
                                <label for="today">
                                    <input type="radio" name="definedRanges" id="today" value="today" checked>
                                    <span class="radio-circle date-checked">
                                    </span>
                                    امروز
                                </label>
                                <label for="yesterday">
                                    <input type="radio" name="definedRanges" id="yesterday" value="yesterday">
                                    <span class="radio-circle"></span>
                                    دیروز
                                </label>
                                <label for="lastWeek">
                                    <input type="radio" name="definedRanges" id="lastWeek" value="lastWeek">
                                    <span class="radio-circle"></span>
                                    7روز گذشته
                                </label>
                                <label for="lastMonth">
                                    <input type="radio" name="definedRanges" id="lastMonth" value="lastMonth">
                                    <span class="radio-circle"></span>
                                    30روز گذشته
                                </label>
                            </div>
                            <div class="calendars-container">
                                <div class="from-date-row">
                                    <div class="date-input-box">
                                        <input class="datepicker-demo range-from-example-alt flex-grow" id="startRange"
                                            name="startRange" placeholder="از تاریخ">
                                        <label for="startRange">
                                            <span class="icon-Calendar1"></span>
                                        </label>
                                    </div>
                                    <p class="numinput-error">
                                        <span class="icon-Danger"></span>
                                        <span>پر کردن فیلد الزامی است.</span>
                                    </p>
                                </div>
                                <div class="to-date-row">
                                    <div class="date-input-box">
                                        <input class="datepicker-demo range-to-example-alt flex-grow" id="endRange"
                                            name="endRange" placeholder="تا تاریخ">
                                        <label for="endRange ">
                                            <span class="icon-Calendar1"></span>
                                        </label>
                                    </div>
                                    <p class="numinput-error">
                                        <span class="icon-Danger"></span>
                                        <span>پر کردن فیلد الزامی است.</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- order type -->
                    <div class="range-type order-type ">
                        <!-- order type header -->
                        <div class="range-type-header">
                            <label for="orderId" class="">
                                <input type="radio" name="rangeType" id="orderId" value="orderId">
                                <span class="radio-circle"></span>شماره سفارش
                            </label>
                        </div>
                        <!-- order type body -->
                        <div class="range-type-body disable">
                            <p class="title">شماره 5 رقمی سفارش مورد نظر خود را وارد کنید.</p>
                            <div class="report-number-container">
                                <p class="text">از شماره</p>
                                <div class="num-input-box">
                                    <div id="from-number" class="numinput-container">
                                        <div class="form-group">
                                            <input class="text-center form-control" type="text" id="startId1"
                                                name="startId1" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="text" id="startId2"
                                                name="startId2" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="text" id="startId3"
                                                name="startId3" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="text" id="startId4"
                                                name="startId4" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="text" id="startId5"
                                                name="startId5" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                    </div>
                                    <p class="from-error numinput-error">
                                        <span class="icon-Danger"></span>
                                        <span>شماره سفارش باید 5 رقمی باشد.</span>
                                    </p>
                                </div>
                            </div>
                            <div class="report-number-container">
                                <p class="text">تا شماره</p>
                                <div class="num-input-box">
                                    <div id="to-number" class="numinput-container">
                                        <div class="form-group">
                                            <input class="text-center form-control" type="text" id="endId1"
                                                name="endId1" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class=" text-center form-control" type="text" id="endId2"
                                                name="endId2" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="text" id="endId3"
                                                name="endId3" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="text" id="endId4"
                                                name="endId4" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                        <div class="form-group">
                                            <input class="text-center form-control" type="text" id="endId5"
                                                name="endId5" maxlength="1" max="1" disabled />
                                            <span class="input-line"></span>
                                        </div>
                                    </div>
                                    <p class="to-error numinput-error">
                                        <span class="icon-Danger"></span>
                                        <span>شماره سفارش باید 5 رقمی باشد.</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- /report type container -->

                <hr class="divide-line"><!-- divide line -->


                <!-- More informations in sales report form -->
                <section class="extra-option-container" id="extraOptionContainer">
                    <p class="title">تمایل دارید چه اطلاعات دیگری در گزارش شما وجود داشته باشد؟</p>
                    <!-- notice box -->
                    <div class="notice-box">
                        <span class="icon-Info-Square"></span>
                        انتخاب این موارد اختیاری است.
                    </div>

                    <!-- information boxes container -->
                    <div class="info-boxes-container">
                        <!-- information boxes row -->
                        <div class="info-boxes">
                            <!-- information box -->
                            <div class="info-box">
                                <label for="customerName">
                                    <input type="checkbox" name="extraOptions[]" id="customerName" value="customerName">
                                    <span class="checkBox"></span>
                                    نام مشتری
                                </label>
                            </div>

                            <!-- information box -->
                            <div class="info-box">
                                <label for="orderState">
                                    <input type="checkbox" name="extraOptions[]" id="orderState" value="orderState">
                                    <span class="checkBox"></span>
                                    وضعیت سفارش
                                </label>
                            </div>
                        </div>

                        <!-- information boxes row -->
                        <div class="info-boxes">
                            <!-- locked boxes container of future features -->
                            <div class="locked-box-container">
                                <!-- locked box -->
                                <div class="locked-box disable">
                                    <span class="icon-Lock"></span>
                                    <p>تعداد محصولات</p>
                                </div>
                                <p class="soon-notice">بزودی ...</p>
                            </div>

                            <!-- locked boxes container of future features -->
                            <div class="locked-box-container">
                                <!-- locked box -->
                                <div class="locked-box disable">
                                    <span class="icon-Lock"></span>
                                    <p>فقط مشتری اولی ها</p>
                                </div>
                                <p class="soon-notice">بزودی ...</p>
                            </div>

                            <!-- locked boxes container of future features -->
                            <div class="locked-box-container">
                                <!-- locked box -->
                                <div class="locked-box disable">
                                    <span class="icon-Lock"></span>
                                    <p>فیلتر براساس شهر</p>
                                </div>
                                <p class="soon-notice">بزودی ...</p>
                            </div>
                            <!-- /locked boxes container of future features -->
                        </div>
                    </div>
                    <!-- /information boxes container -->

                    <hr class="divide-line"><!-- divide line -->
                </section>
                <!-- /More information -->


                <section class="paymentWay-container">
                    <p class="title">سفارشات با چه نوع روش پرداخت در گزارش شما وجود داشته باشد؟</p>
                    <!-- notice box -->
                    <div class="notice-box">
                        <span class="icon-Info-Square"></span>
                        حداقل یکی از موارد باید انتخاب شود.
                    </div>

                    <!-- information boxes container -->
                    <div class="info-boxes-container">
                        <!-- information boxes row -->
                        <div class="info-boxes">
                            <!-- information box -->
                            <div class="info-box info-box-checked">
                                <label for="pasargad">
                                    <input checked type="checkbox" name="paymentType[]" id="pasargad" value="pasargad">
                                    <span class="checkBox date-checked"></span>
                                    سفارشات آنلاین (درگاه بانک پاسارگاد)
                                </label>
                            </div>

                            <!-- information box -->
                            <div class="info-box info-box-checked">
                                <label for="melli">
                                    <input checked type="checkbox" name="paymentType[]" id="melli" value="melli">
                                    <span class="checkBox date-checked"></span>
                                    سفارشات آنلاین (درگاه بانک ملی)
                                </label>
                            </div>
                        </div>
                        <!-- information boxes row -->
                        <div class="info-boxes">
                            <!-- information box -->
                            <div class="info-box">
                                <label for="cod">
                                    <input type="checkbox" name="paymentType[]" id="cod" value="cod">
                                    <span class="checkBox"></span>
                                    سفارشات تحویل در محل
                                </label>
                            </div>

                            <!-- information box -->
                            <div class="info-box">
                                <label for="direct">
                                    <input type="checkbox" name="paymentType[]" id="direct" value="direct">
                                    <span class="checkBox"></span>
                                    سفارشات مستقیم
                                </label>
                            </div>
                        </div>
                    </div>
                    <!-- /information boxes container -->
                </section>
                <section class="submit-btns-container">
                    <div class="button-box">
                        <label for="showReport">
                            <span class="icon-Show"></span>
                            <p class="submit-text">نمایش گزارش</p>
                            <input type="submit" name="showReport" id="showReport" value="نمایش گزارش">
                        </label>
                    </div>
                    <div class="button-box">
                        <label for="exportExcel">
                            <span class="icon-Paper-Fail"></span>
                            <input type="submit" class="rendering" name="exportExcel" value="خروجی اکسل"
                                id="exportExcel">
                            <p class="submit-text">خروجی اکسل</p>
                            <div class="dot-flashing"></div>
                        </label>
                        <div class="output-progress">
                            <p class="">لطفا منتظر بمانید...</p>
                            <p class="">35%</p>
                        </div>
                    </div>
                    <div class="button-box">
                        <label for="exportSepidar" class="disable">
                            <span class="icon-Lock"></span>
                            <p class="submit-text">خروجی مخصوص سپیدار</p>
                            <input type="submit" name="exportSepidar" id="exportSepidar" value="خروجی مخصوص سپیدار">
                        </label>
                        <p class="soon-notice">بزودی ...</p>
                    </div>
                </section>
            </form>
        </div>
        <!-- form container -->
    </div>
    <!-- /container -->

    <!-- Show report modal -->
    <div class="modal-backdrop">
        <span class="close"></span>
        <div id="showReportModal"></div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <img src="assets/Img/pn-logo.png" alt="Pishgam Negar" class="logo">
    </footer>
    <!-- /Footer -->
    <script src="js/gridjs.umd.js"></script>
    <script src="./index.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var to, from;

            to = $(".range-to-example-alt").persianDatepicker({
                altFormat: 'LLLL',
                // format: 'YYYY-MM-DD HH:mm:ss',
                initialValue: false,
                responsive: false,
                onSelect: function (unix) {
                    to.touched = true;
                    if (from && from.options && from.options.maxDate != unix) {
                        var cachedValue = from.getState().selected.unixDate;
                        from.options = { maxDate: unix };
                        if (from.touched) {
                            from.setDate(cachedValue);
                        }
                    }
                },
                formatter: function (unixDate) {
                    var self = this;
                    var pdate = new persianDate(unixDate);
                    pdate.formatPersian = false;
                    let format = pdate.format("YYYY-MM-DD HH:mm:ss")
                    return format;
                },
                minDate: 1635192623000,
                autoClose: true,
                timePicker: {
                    enabled: true,
                },
                navigator: {
                    scroll: {
                        enabled: false,
                    }
                },
                toolbox: {
                    enabled: false,
                }
            });
            from = $(".range-from-example-alt").persianDatepicker({
                minDate: 1635192623000,
                altFormat: 'LLLL',
                format: 'YYYY-MM-DD HH:mm:ss',
                initialValue: false,
                responsive: false,
                autoClose: true,
                onSelect: function (unix) {
                    from.touched = true;
                    if (to && to.options && to.options.minDate != unix) {
                        var cachedValue = to.getState().selected.unixDate;
                        to.options = { minDate: unix };
                        if (to.touched) {
                            to.setDate(cachedValue);
                        }
                    }
                },
                formatter: function (unixDate) {
                    var self = this;
                    var pdate = new persianDate(unixDate);
                    pdate.formatPersian = false;
                    let format = pdate.format("YYYY-MM-DD HH:mm:ss")
                    return format;
                },
                timePicker: {
                    enabled: true,
                },
                navigator: {
                    scroll: {
                        enabled: false,
                    }
                },
                toolbox: {
                    enabled: false,
                },
            });
            // function range() {
            //     const tds = [...document.querySelectorAll(".datepicker-container td")];
            //     const selectedTd = [
            //         ...document.querySelectorAll(".datepicker-container td.selected"),
            //     ];

            //     const getFrom = from.getState().selected;
            //     const getTo = to.getState().selected;
            //     const fromDate = getFrom.year + `${getFrom.month < 10 ? "0" + getFrom.month : getFrom.month}` + `${getFrom.date < 10 ? "0" + getFrom.date : getFrom.date}`
            //     const toDate = getTo.year + `${getTo.month < 10 ? "0" + getTo.month : getTo.month}` + `${getTo.date < 10 ? "0" + getTo.date : getTo.date}`

            //     const tdds = tds.filter((t) => ![...t.classList].includes("disabled"));
            //     const timeSpanTds = tdds.filter(
            //         (t) => parseInt(fromDate) <= parseInt(splitDate(t.dataset.date)) && parseInt(splitDate(t.dataset.date)) <= parseInt(toDate)
            //     );
            //     // console.log(timeSpanTds);
            //     if (timeSpanTds[timeSpanTds.length - 1].dataset.date !== timeSpanTds[0].dataset.date) {

            //         timeSpanTds[timeSpanTds.length - 1].classList.add("toSelected")
            //         timeSpanTds[0].classList.add("fromSelected")
            //         timeSpanTds[timeSpanTds.length / 2].classList.add("fromSelected")
            //     }

            //     timeSpanTds.forEach((tst) => {
            //         tst.classList.add("time-span");
            //     });
            // }
            // function splitDate(date) {
            //     let varrey = date.split(",")
            //     const vv = `${varrey[0]}` + `${varrey[1] < 10 ? "0" + varrey[1] : varrey[1]}` + `${varrey[2] < 10 ? "0" + varrey[2] : varrey[2]}`
            //     return vv;
            // }
            // window.addEventListener("click", () => {
            // console.log(splitDate("1400,9,14"))

            // range()
            // })
        });

    </script>
</body>

</html>